(function(e){function r(r){for(var n,i,c=r[0],s=r[1],u=r[2],l=0,d=[];l<c.length;l++)i=c[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&d.push(o[i][0]),o[i]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);p&&p(r);while(d.length)d.shift()();return a.push.apply(a,u||[]),t()}function t(){for(var e,r=0;r<a.length;r++){for(var t=a[r],n=!0,c=1;c<t.length;c++){var s=t[c];0!==o[s]&&(n=!1)}n&&(a.splice(r--,1),e=i(i.s=t[0]))}return e}var n={},o={app:0},a=[];function i(r){if(n[r])return n[r].exports;var t=n[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,r,t){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var n in e)i.d(t,n,function(r){return e[r]}.bind(null,n));return t},i.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=r,c=c.slice();for(var u=0;u<c.length;u++)r(c[u]);var p=s;a.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},1:function(e,r){},"56d7":function(e,r,t){"use strict";t.r(r);t("e260"),t("e6cf"),t("cca6"),t("a79d"),t("4de4");var n=t("2b0e"),o=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{attrs:{id:"app"}},[t("div",{attrs:{id:"nav"}},[t("header-beer")],1),t("router-view")],1)},a=[],i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("router-link",{attrs:{to:{path:"/"}}},[e._v(" Liste des bières ")]),t("router-link",{attrs:{to:{name:"BeerForm",params:{id:0}}}},[e._v(" Ajouter une bière ")])],1)},c=[],s={name:"HeaderBeer"},u=s,p=t("2877"),l=Object(p["a"])(u,i,c,!1,null,"631931e6",null),d=l.exports,m={components:{HeaderBeer:d}},v=m,b=(t("5c0b"),Object(p["a"])(v,o,a,!1,null,null,null)),f=b.exports,h=t("28dd"),g=t("8c4f"),_=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"home"},[t("router-view")],1)},w=[],y={name:"Home",components:{},data:function(){return{}},methods:{}},x=y,T=Object(p["a"])(x,_,w,!1,null,null,null),B=T.exports,H=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("form",{on:{submit:function(r){return r.preventDefault(),e.saveBeer(r)}}},[t("p",[e._v(" Nom : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.beer.name,expression:"beer.name"}],attrs:{type:"text",required:""},domProps:{value:e.beer.name},on:{input:function(r){r.target.composing||e.$set(e.beer,"name",r.target.value)}}})]),e.errorMessage.name?t("div",[e._v(" "+e._s(e.errorMessage.name)+" ")]):e._e(),t("p",[e._v(" Commentaires : "),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.beer.comment,expression:"beer.comment"}],domProps:{value:e.beer.comment},on:{input:function(r){r.target.composing||e.$set(e.beer,"comment",r.target.value)}}})]),t("p",[e._v(" Prix HT : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.beer.priceHT,expression:"beer.priceHT"}],attrs:{type:"number",required:""},domProps:{value:e.beer.priceHT},on:{input:function(r){r.target.composing||e.$set(e.beer,"priceHT",r.target.value)}}})]),e.errorMessage.priceHT?t("div",[e._v(" "+e._s(e.errorMessage.priceHT)+" ")]):e._e(),t("p",[e._v(" Prix TTC: "),t("price-ttc",{attrs:{canEdit:!0},on:{updatePriceHt:e.updatePriceHt},model:{value:e.beer.priceHT,callback:function(r){e.$set(e.beer,"priceHT",r)},expression:"beer.priceHT"}})],1),t("p",[e._v(" Degré d'alcool : "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.beer.alcoholDegree,expression:"beer.alcoholDegree"}],attrs:{type:"number",min:"0",max:"70",step:"any",required:""},domProps:{value:e.beer.alcoholDegree},on:{input:function(r){r.target.composing||e.$set(e.beer,"alcoholDegree",r.target.value)}}})]),e.errorMessage.alcoholDegree?t("div",[e._v(" "+e._s(e.errorMessage.type)+" ")]):e._e(),t("p",[t("select",{directives:[{name:"model",rawName:"v-model",value:e.beer.type,expression:"beer.type"}],attrs:{required:""},on:{change:function(r){var t=Array.prototype.filter.call(r.target.options,(function(e){return e.selected})).map((function(e){var r="_value"in e?e._value:e.value;return r}));e.$set(e.beer,"type",r.target.multiple?t:t[0])}}},e._l(e.beerType,(function(r){return t("option",{key:r,domProps:{value:r}},[e._v(" "+e._s(r)+" ")])})),0)]),e.errorMessage.type?t("div",[e._v(" "+e._s(e.errorMessage.type)+" ")]):e._e(),t("button",{attrs:{type:"button"},on:{click:e.goToList}},[e._v(" Annuler ")]),t("button",{attrs:{type:"submit",disabled:!e.formIsValid}},[e._v(" Sauvegarder ")]),e.genericError?t("p",[e._v(" Une erreur est survenue lors de la création ou de la modification d'une bière. ")]):e._e()])])},O=[],j=t("1da1"),P=t("5530"),k=(t("96cf"),t("b0c0"),t("caad"),t("2532"),t("2f62")),$=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[e.canEdit?t("input",{directives:[{name:"model",rawName:"v-model",value:e.priceHT,expression:"priceHT"}],attrs:{type:"number",min:"0",step:"any"},domProps:{value:e.priceHT},on:{input:[function(r){r.target.composing||(e.priceHT=r.target.value)},e.sendPrice]}}):t("p",[e._v(" "+e._s(e.priceHT)+" ")])])},D=[],M=(t("b680"),t("a9e3"),{name:"priceHtTtc",props:{value:{required:!0},canEdit:{type:Boolean,required:!0}},data:function(){return{priceHT:null}},watch:{value:function(e,r){if(e!==r&&""!==this.value){var t=Number(1.2*this.value).toFixed(2);this.priceHT=t}}},methods:{sendPrice:function(){this.$emit("updatePriceHt",Number(this.priceHT/1.2).toFixed(2))}}}),E=M,N=Object(p["a"])(E,$,D,!1,null,null,null),R=N.exports,A=(t("99af"),"http://163.172.53.19:8081/api/beers"),L={getBeer:function(e,r){return n["a"].http.get("".concat(A,"/").concat(e),{params:{owner:r}})},getAllBeer:function(e){return n["a"].http.get("".concat(A),{params:{owner:e}})},createBeer:function(e,r){return n["a"].http.post("".concat(A,"?owner=").concat(r),Object(P["a"])({},e))},updateBeer:function(e,r){return n["a"].http.put("".concat(A,"/").concat(e.id,"?owner=").concat(r),Object(P["a"])(Object(P["a"])({},e),{},{owner:r}))},removeBeer:function(e,r){return n["a"].http.delete("".concat(A,"/").concat(e,"?owner=").concat(r))}},C={name:"BeerForm",components:{PriceTtc:R},data:function(){return{genericError:!1,beer:{name:"",comment:"",priceHT:0,alcoholDegree:0,type:"",id:0,owner:""},beerType:["BLONDE","IPA","BROWN","DARK"],errorMessage:{},isUpdate:!1}},computed:Object(P["a"])({formIsValid:function(){return""!==this.beer.name&&""!==this.beer.priceHT&&""!==this.beer.alcoholDegree&&""!==this.beer.type}},Object(k["b"])({currentBeer:"getCurrentBeer",owner:"getOwner"})),methods:{goToList:function(){this.$store.commit("resetCurrentBeer"),this.$router.push("/")},saveBeer:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,!e.formIsValid){r.next=12;break}if(!e.isUpdate){r.next=7;break}return r.next=5,L.updateBeer(e.beer,e.owner);case 5:r.next=9;break;case 7:return r.next=9,L.createBeer(e.beer,e.owner);case 9:e.goToList(),r.next=16;break;case 12:""===e.beer.name&&(e.errorMessage.name="Le nom est obligatoire."),""===e.beer.priceHT&&(e.errorMessage.priceHT="Le prix est obligatoire."),""!==e.beer.type&&e.beerType.includes(e.beer.type)||(e.errorMessage.type="Le type est obligatoire et doit être d'une des valeurs suivantes BLONDE, BROWN, IPA, DARK"),(""===e.beer.alcoholDegree||e.beer.alcoholDegree<0||e.beer.alcoholDegree>70)&&(e.errorMessage.type="Le degré d'alcool est obligatoire et doit être compris entre 0 et 70");case 16:r.next=22;break;case 18:r.prev=18,r.t0=r["catch"](0),e.genericError=!0,console.error("Erreur lors de la création ou la modification d'une bière");case 22:case"end":return r.stop()}}),r,null,[[0,18]])})))()},updatePriceHt:function(e){this.beer.priceHT=e},getBeer:function(e){var r=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.getBeer(e,r.owner);case 3:n=t.sent,r.beer=n.body,t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("Impossible de récupérer la bière avec id =",e);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){this.$route.params.id&&""!==this.$route.params.id&&0!==this.$route.params.id&&(this.isUpdate=!0,this.getBeer(this.$route.params.id))}},F=C,S=Object(p["a"])(F,H,O,!1,null,"df768a16",null),I=S.exports,q=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("table",[e._m(0),t("tbody",e._l(e.beers,(function(r,n){return t("tr",{key:n},[t("td",[e._v(" "+e._s(e._f("upperCaseFilter")(r.name))+" ")]),t("td",[e._v(" "+e._s(r.comment)+" ")]),t("td",[e._v(" "+e._s(r.alcoholDegree)+" ")]),t("td",[e._v(" "+e._s(r.type)+" ")]),t("td",[e._v(" "+e._s(r.priceHT)+" ")]),t("td",[t("price-ttc",{attrs:{canEdit:!1},model:{value:r.priceHT,callback:function(t){e.$set(r,"priceHT",t)},expression:"beer.priceHT"}})],1),t("td",[t("button",{attrs:{type:"button"},on:{click:function(t){return e.updateBeer(r)}}},[e._v(" Modifier ")]),t("button",{attrs:{type:"button"},on:{click:function(t){return e.deleteBeer(r)}}},[e._v(" Supprimer ")])])])})),0)])])},U=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("thead",[t("tr",[t("th",[e._v("Nom")]),t("th",[e._v("Commentaires")]),t("th",[e._v("Degré d'alcool")]),t("th",[e._v("Type")]),t("th",[e._v("Prix HT")]),t("th",[e._v("Prix TTC")]),t("th",[e._v("Actions")])])])}],V={name:"BeerList",components:{priceTtc:R},data:function(){return{beers:[]}},computed:Object(P["a"])({},Object(k["b"])({owner:"getOwner"})),methods:{updateBeer:function(e){this.$router.push({name:"BeerForm",params:{id:e.id}})},getAllBeer:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,L.getAllBeer(e.owner);case 3:t=r.sent,e.beers=t.body.content,r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](0),console.error("Une erreur est survenue lors de la récupération des bières");case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))()},deleteBeer:function(e){var r=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.removeBeer(e.id,r.owner);case 3:return t.next=5,r.getAllBeer();case 5:t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.error("Impossible de supprimer la bière : ",e);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},mounted:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getAllBeer();case 2:case"end":return r.stop()}}),r)})))()}},J=V,K=Object(p["a"])(J,q,U,!1,null,"43ad397c",null),W=K.exports;n["a"].use(g["a"]),n["a"].use(h["a"]);var z=[{path:"/",name:"Home",component:B,children:[{path:"/",name:"BeerList",component:W},{path:"/form/:id",name:"BeerForm",component:I}]},{path:"*",redirect:"/"}],G=new g["a"]({mode:"history",base:"/",routes:z}),Q=G;n["a"].use(k["a"]);var X=new k["a"].Store({state:{owner:"romainP"},mutations:{setOwner:function(e,r){e.owner=r}},getters:{getOwner:function(e){return e.owner}}});function Y(e){return e.toUpperCase()}n["a"].config.productionTip=!1,n["a"].use(h["a"]),n["a"].filter("upperCaseFilter",Y),new n["a"]({router:Q,store:X,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,r,t){"use strict";t("9c0c")},"9c0c":function(e,r,t){}});
//# sourceMappingURL=app.60acedde.js.map